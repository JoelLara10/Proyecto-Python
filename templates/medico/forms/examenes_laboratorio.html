{% extends 'medico/header_medico.html' %}

{% block content %}

{% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    {% for category, message in messages %}
      <div class="alert alert-{{ 'success' if category == 'success' else 'danger' }} alert-dismissible fade show" role="alert">
        <i class="fas fa-check-circle"></i>
        {{ message }}
        <button type="button" class="close" data-dismiss="alert">
          <span>&times;</span>
        </button>
      </div>
    {% endfor %}
  {% endif %}
{% endwith %}

<section class="content-header">
  <h1 class="text-primary">
    <i class="fas fa-vials"></i> Exámenes de Laboratorio
  </h1>
</section>

<section class="content">

  <div class="card card-primary">
    <div class="card-header">
      <h3 class="card-title">
        Paciente: {{ paciente.papell }} {{ paciente.sapell }} {{ paciente.nom_pac }}
      </h3>
    </div>

    <form method="POST" action="{{ url_for('guardar_examenes_laboratorio') }}">

      <div class="card-body">

        <input type="hidden" name="id_atencion" value="{{ id_atencion }}">
        <input type="hidden" name="Id_exp" value="{{ paciente.Id_exp }}">

        <div class="form-group">
          <label>Seleccione los exámenes de laboratorio</label>

          <div class="row">
            {% for examen in examenes %}
              <div class="col-md-6">
                <div class="form-check">
                  <input class="form-check-input"
       type="checkbox"
       name="examenes[]"
       value="{{ examen.id_catalogo }}"
       id="lab{{ examen.id_catalogo }}">

                  <label class="form-check-label" for="lab{{ examen.id_catalogo }}">
                    {{ examen.nombre }}
                  </label>
                </div>
              </div>
            {% endfor %}
          </div>
        </div>

        <div class="form-group mt-3">
          <label>Observaciones</label>
          <textarea class="form-control" name="otros" rows="3"></textarea>
        </div>

      </div>

      <div class="card-footer text-center">
        <button type="submit" class="btn btn-primary">
          <i class="fas fa-save"></i> Guardar Exámenes
        </button>

        <a href="{{ url_for(
            'paciente',
            id_atencion=id_atencion,
            Id_exp=paciente.Id_exp
        ) }}" class="btn btn-secondary">
          Cancelar
        </a>
      </div>

    </form>
  </div>

</section>

{% endblock %}
